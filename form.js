function updateRequiredFields(){document.querySelectorAll(".conditional-fields").forEach(function(container){var isVisible="none"!==container.style.display;container.querySelectorAll("input[required], select[required], textarea[required]").forEach(function(field){isVisible?(field.required=!0,field.setCustomValidity("")):(field.required=!1,field.setCustomValidity(""),field.value="")})})}function registerNotificationBar(notifElement){var block=notifElement,content=block.querySelector(".fc-message-content");function resetNotification(){block.className="formcarry-message-block"}return block.querySelector(".fc-message-close").addEventListener("click",resetNotification),{resetNotification:resetNotification,notify:function(status,message){var notifClasses=["formcarry-message-block","fc-"+("error"===status?"error":"success"),"active"];block.className=notifClasses.join(" "),content.innerHTML=message,"success"===status&&setTimeout(resetNotification,5e3)}}}document.getElementById("subject").addEventListener("change",function(){var selectedValue=this.value,messageField=(document.querySelectorAll(".conditional-fields").forEach(function(field){field.style.display="none"}),document.getElementById("message")),targetFields=null;switch(selectedValue){case"full-time":targetFields=document.getElementById("employment-fields");break;case"freelance":targetFields=document.getElementById("freelance-fields");break;case"collaboration":targetFields=document.getElementById("collaboration-fields")}var placeholders={"full-time":"Tell me about the role, your company culture, and what excites you about this opportunity...",freelance:"Describe your project goals, current challenges, and what success looks like...",collaboration:"What kind of collaboration are you envisioning? What would we work on together?",feedback:"Which project caught your attention? What are your thoughts or suggestions?",general:"What questions do you have? How can I help you?"};targetFields&&(targetFields.style.display="block",targetFields.classList.add("fade-in")),placeholders[selectedValue]&&(messageField.placeholder=placeholders[selectedValue]),updateRequiredFields()}),document.querySelector(".formcarryForm").addEventListener("reset",function(){setTimeout(updateRequiredFields,10)}),document.addEventListener("DOMContentLoaded",function(){updateRequiredFields()}),document.querySelector(".formcarryForm").addEventListener("submit",function(e){e.preventDefault(),e.stopPropagation();var e=this.getAttribute("action"),formData=new FormData(this),form=this,submitBtn=document.getElementById("submit-btn"),_registerNotification=registerNotificationBar(form.querySelector(".formcarry-message-block")),notify=_registerNotification.notify;(0,_registerNotification.resetNotification)(),submitBtn.disabled=!0,submitBtn.innerHTML="<span>Sending...</span>",fetch(e,{method:"POST",headers:{Accept:"application/json"},body:formData}).then(function(response){return response.json()}).then(function(response){submitBtn.disabled=!1,submitBtn.innerHTML="<span>Send Message</span>","success"==response.status?(notify("success","Thanks! I'll get back to you within 24 hours."),form.reset(),document.querySelectorAll(".conditional-fields").forEach(function(field){field.style.display="none"})):422===response.code?(Object.keys(response.errors).forEach(function(key){var field=form.querySelector('[name="'+key+'"]');field&&(field.setCustomValidity(response.errors[key].message),field.addEventListener("invalid",function(){this.addEventListener("blur",function(){this.setCustomValidity("")})}))}),form.reportValidity(),notify("error",response.message)):notify("error",response.message||"Something went wrong. Please try again.")}).catch(function(error){submitBtn.disabled=!1,submitBtn.innerHTML="<span>Send Message</span>",notify("error","Network error. Please check your connection and try again.")})}),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".fc-message-close").forEach(function(button){button.setAttribute("tabindex","0"),button.setAttribute("role","button"),button.setAttribute("aria-label","Close message"),button.addEventListener("keydown",function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.click())})})});